{"paragraphs":[{"text":"%spark.r\nlibrary(SPARQL)","user":"mrkhan","dateUpdated":"2019-01-16T10:37:43-0800","config":{"tableHide":false,"editorSetting":{"language":"r","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/r","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1547663638019_-20967322","id":"20180501-163623_1224708537","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:43-0800","dateFinished":"2019-01-16T10:37:43-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:646"},{"text":"%spark\nval group = z.input(\"group\", \"\")\nz.put(\"group\", group)\nval name = z.input(\"name\",\"Reference Designator\")\nz.put(\"name\", name)","user":"mrkhan","dateUpdated":"2019-01-16T10:37:44-0800","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{"group":"","name":"Reference Designator"},"forms":{"group":{"type":"TextBox","name":"group","displayName":"group","defaultValue":"","hidden":false,"$$hashKey":"object:770"},"name":{"type":"TextBox","name":"name","displayName":"name","defaultValue":"Reference Designator","hidden":false,"$$hashKey":"object:771"}}},"apps":[],"jobName":"paragraph_1547663638035_-199914777","id":"20180924-101819_543199781","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:44-0800","dateFinished":"2019-01-16T10:37:44-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:647"},{"text":"%spark\n\nval fuseki = z.input(\"fuseki\", \"https://imce-caesar-repository.jpl.nasa.gov/\")\nz.put(\"fuseki\", fuseki)\n\nval dataset = z.input(\"dataset\")\nz.put(\"dataset\", dataset)","user":"mrkhan","dateUpdated":"2019-01-16T10:37:44-0800","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{"fuseki":"https://imce-caesar-repository.jpl.nasa.gov/","dataset":"225ab538e5e923896b9e77d808404de449379ebe"},"forms":{"fuseki":{"type":"TextBox","name":"fuseki","displayName":"fuseki","defaultValue":"https://imce-caesar-repository.jpl.nasa.gov/","hidden":false,"$$hashKey":"object:792"},"dataset":{"type":"TextBox","name":"dataset","displayName":"dataset","defaultValue":"","hidden":false,"$$hashKey":"object:793"}}},"apps":[],"jobName":"paragraph_1547663638049_1137244959","id":"20180904-103606_731065124","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:44-0800","dateFinished":"2019-01-16T10:37:44-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:648"},{"text":"%spark.r\nendpoint <-  paste(z.get(\"fuseki\"), z.get(\"dataset\"), \"/sparql\", sep=\"\")\n\nquery <-\n'\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX fse: <http://imce.jpl.nasa.gov/discipline/fse/fse#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\nPREFIX base: <http://imce.jpl.nasa.gov/foundation/base/base#>\nPREFIX mission: <http://imce.jpl.nasa.gov/foundation/mission/mission#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX EuropaTypes: <http://europa.jpl.nasa.gov/efse/libraries/EuropaTypes#>\nselect distinct ?subSystemNumber  ?subSystemRefDes ?subSystemLabel ?subSystemAcronym ?provenanceSubsystem ?assemblyAcronym ?assemblyName ?assemblyRefDes ?parentAssemblyRefDes ?mountingLocation ?provenanceAssembly \nwhere {\n  #Getting Subsystem\n    graph ?gs {?ss a ?st}\n    ?gs fse:hasProvenance ?provenanceSubsystem .\n    ?st rdfs:subClassOf fse:Subsystem . \n    ?ss fse:hasSubsystemAcronym ?subSystemAcronym ;\n        fse:hasSubsystemNumber ?subSystemNumber ;\n        fse:hasSubsystemReferenceDesignator ?subSystemRefDes ;\n        base:hasAlternateName ?subSystemLabel .\n   \n  \n   [ base:hasAggregatesSource ?ss; \n      base:hasAggregatesTarget ?a ].\n  \n  #Getting Assembly\n    graph ?ga {?a a ?at } .\n    ?ga fse:hasProvenance ?provenanceAssembly .\n    ?at rdfs:subClassOf fse:Assembly .\n    ?a fse:hasAssemblyReferenceDesignator ?assemblyRefDes ;\n       base:hasAlternateName ?assemblyAcronym ;\n       base:hasCanonicalName ?assemblyName .\n  optional{\n  \t?parenta a base:Contains ;\n            base:hasContainsSource ?pa;\n        \tbase:hasContainsTarget ?a.\n        ?pa fse:hasAssemblyReferenceDesignator ?parentAssemblyRefDes ;\n  }\n  optional{\n    ?a EuropaTypes:BasicAssembly.Mounting_Location ?mountingLocation.\n  }\n      \n\n}\n\n\n'\nqd <- SPARQL(endpoint,query)\ndf <- qd$results\n","user":"mrkhan","dateUpdated":"2019-01-16T10:37:44-0800","config":{"tableHide":false,"editorSetting":{"language":"r","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/r","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1547663638075_1240927815","id":"20180502-104222_1423389208","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:44-0800","dateFinished":"2019-01-16T10:37:58-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:649"},{"text":"%spark.r\n\n#Defining Column Names\ncolNames<- c(\"SUBSYSTEM_NUMBER\" , \"SUBSYSTEM_REFDES\", \"SUBSYSTEM_NAME\", \"SUBSYSTEM_ACRONYM\", \"PROVENANCE_SUBSYSTEM\", \"ASSEMBLY_ACRONYM\", \"ASSEMBLY_NAME\" , \"ASSEMBLY_REFDES\",\"PARENT_ASSEMBLY\", \"MOUNTING_LOCATION\", \"PROVENANCE_ASSEMBLY\")\n\n#Aggregating multiple function numbers into a coma separated single row\nd <- tryCatch(\n    {\n        #Renaming column Names\n        names(df) <-colNames\n        createDataFrame(sqlContext,df)\n        \n    }, error=function(e) {\n    \n        #Creating Empty data frame\n        emptydf <- data.frame(rbind(sapply(colNames,function(x)NA)))\n        createDataFrame(sqlContext,emptydf)\n        \n    })\n    \n\nregisterTempTable (d, \"EFSE_REF_DES\")","user":"mrkhan","dateUpdated":"2019-01-16T10:37:58-0800","config":{"editorSetting":{"language":"r","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/r","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1547663638092_-978501958","id":"20181106-150856_438705453","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:58-0800","dateFinished":"2019-01-16T10:37:58-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:650"},{"text":"%angular\n<h2>Reference Designator Report from EFSE</h2>\n<h5>The table shows all the Reference Designator data from EFSE.</h5>\n<p>To download the data in .csv format click the right corner of the table and select download as .csv</p>\n<p><i>Note: Not all data types will support download to excel</i></p>","user":"mrkhan","dateUpdated":"2019-01-16T10:37:59-0800","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1547663638105_-284644195","id":"20180503-123956_1710275485","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:59-0800","dateFinished":"2019-01-16T10:37:59-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:651"},{"text":"%sql\nSELECT distinct  SUBSYSTEM_NUMBER,   SUBSYSTEM_ACRONYM as SUBSYSTEM_OR_ASSEMBLY_ACRONYM , SUBSYSTEM_NAME as SUBSYSTEM_OR_ASSEMBLY_NAME, SUBSYSTEM_REFDES as REFDES, PROVENANCE_SUBSYSTEM as CONFIGURATION_MANAGEMENT_STATE FROM EFSE_REF_DES union all select SUBSYSTEM_REFDES,  ASSEMBLY_ACRONYM, ASSEMBLY_NAME, ASSEMBLY_REFDES, PROVENANCE_ASSEMBLY from EFSE_REF_DES ","user":"mrkhan","dateUpdated":"2019-01-16T10:38:15-0800","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"results":{"0":{"graph":{"mode":"table","height":1020,"optionOpen":false,"setting":{"table":{"tableGridState":{"columns":[{"name":"SUBSYSTEM_NUMBER","visible":true,"width":"*","sort":{"priority":0,"direction":"asc"},"filters":[{"term":""}],"pinned":""},{"name":"SUBSYSTEM_OR_ASSEMBLY_ACRONYM","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"SUBSYSTEM_OR_ASSEMBLY_NAME","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"REFDES","visible":true,"width":"*","sort":{},"filters":[{"term":""}],"pinned":""},{"name":"CONFIGURATION_MANAGEMENT_STATE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""}],"scrollFocus":{},"selection":[],"grouping":{"grouping":[],"aggregations":[],"rowExpandedStates":{}},"treeView":{},"pagination":{"paginationCurrentPage":1,"paginationPageSize":250}},"tableColumnTypeState":{"names":{"SUBSYSTEM_NUMBER":"string","SUBSYSTEM_OR_ASSEMBLY_ACRONYM":"string","SUBSYSTEM_OR_ASSEMBLY_NAME":"string","REFDES":"string","CONFIGURATION_MANAGEMENT_STATE":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":true,"showPagination":true,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1547663638116_-2013506763","id":"20180821-091054_1884114966","dateCreated":"2019-01-16T10:33:58-0800","dateStarted":"2019-01-16T10:37:59-0800","dateFinished":"2019-01-16T10:38:01-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:652"},{"text":"%sql\n","user":"mrkhan","dateUpdated":"2019-01-16T10:38:01-0800","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1547663638129_343119275","id":"20180904-105845_1888304291","dateCreated":"2019-01-16T10:33:58-0800","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:653"}],"name":"templates/EFSE Reports/Reference Designator","id":"2E3QBS4CW","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"spark:shared_process":[]},"config":{"isRevisionSupported":true,"looknfeel":"default","personalizedMode":"false","isZeppelinNotebookCronEnable":false},"info":{}}